# 20.추상 클래스보다는 인터페이스를 우선하라

**인터페이스 vs. 추상 클래스**
- 공통된 **목적**
  - Java의 다중 구현 메커니즘. 
  - 인스턴스 메서드를 구현하여 제공 가능
- **구현**에서 차이
  - 추상 클래스를 구현  ➡  추상클래스의 하위 클래스. 단일 상속
  - 인터페이스를 구현  ➡  같은 타입(계층 ❌). 다중 상속

## 인터페이스의 장점 🔍
- 기존 클래스에서 새로운 인터페이스 쉽게 구현 가능 
  - `implements`로 선언을 추가하고, 요구되는 메서드 구현
  - 추상 클래스를 기존 클래스에 추가하는 경우, 계층 구조에 대해 확인할 필요가 있음
- 믹스인 정의에 적합
  - `믹스인`: 클래스가 구현할 수 있는 타입. 믹스인을 구현한 클래스에서는 `주된 타입`외에도 특정 `선택적 행위` 제공 가능  
  ```java
  public class Count implements Comparable<Count>{
    
    @Override
    public int compareTo(Count o) { // 믹스인
        return 0;
    }
    
    public void increase() { // 주된 타입
        this.number++;
    }
  }
  ```
  - 두개 이상의 추상 클래스로는 믹스인을 삽입하기 어려움
- 계층구조가 없는 타입 프레임워크 생성 가능
  ```java
  public interface TikToker {
      Video dance(Music music);
  }

  public interface Youtuber {
      StreamService broadcast();
  }

  public interface Influencer extends TikToker, Youtuber {
      StreamService broadcast();
  }
  ```
  - n개의 속성이 존재할 때, 추상클래스로 구현하는 경우 `2^n`만큼의 조합의 수
- 래퍼 클래스 관용구와 궁합이 좋음
  - 기능 향상 시키는 안전하고 강력한 수단 

## 인터페이스의 특징
### default 메서드
- `@implSpec` 태그로 문서화하기
- `equals`와 `hashCode`는 정의 불가
- 인스턴스 필드를 가질 수 없음 
- public이 아닌 정적 멤버를 가질 수 없음(private 정적 메서드는 예외)

## 골격 구현(skeletal implementation)
- **복잡한 인터페이스 구현의 수고를 덜어줌**
- 인터페이스의 장점 + 추상 클래스의 장점
- 인터페이스 ➡ 타입 + 디폴트 메서드
- 골격구현 클래스 ➡ 나머지 메서드들까지 구현(템플릿 메서드 패턴)
- 네이밍 방법: Abstract+Interface명 (ex. AbstractCollection, AbstractSet)


### 골격 구현 방법
1. 인터페이스에서 다른 메서드들의 구현에 사용되는 **기반 메서드 선정**
2. 기반 메서드들을 사용해 직접 구현할 수 있는 메서드들을 모두 디폴트 메서드로 제공
3. 기반 메서드나 디폴트 메서드로 만들지 못한 메서드가 남아있다면, 이 인터페이스를 구현하는 골격 구현 클래스를 작성
4. 골격 구현은 기본적으로 상속이므로, 설계 및 문서화 지침을 모두 따르기
